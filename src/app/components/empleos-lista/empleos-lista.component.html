<div class="container mx-auto py-8 flex flex-col md:flex-row gap-4">

    <aside class="w-full md:w-1/5 p-4 rounded-lg border border-background-alt max-h-fit">
        <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">Filtros</h1>
        <app-filtros
            (filtrosChange)="onFiltrosChange($event)"
            
        ></app-filtros>
    </aside>
    <main class="w-full md:w-4/5 bg-white p-4 rounded-lg">
        <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">Resultados</h1>

        <div class="flex flex-col gap-4"> 
        <app-card-empleo 
            *ngFor="let empleo of empleos"
            [empleo]="empleo"
        ></app-card-empleo>
        </div>
        <!-- Mensaje de depuración -->
        <div *ngIf="empleos.length === 0" class="text-secondary-text text-center">
        No hay empleos para mostrar
        </div>

        <!-- Paginacion -->
        <div class="mt-8 flex justify-center items-center gap-2">
            <!-- Botón Anterior -->
            <button 
                (click)="onPageChange(currentPage - 1)"
                [disabled]="currentPage === 0"
                class="px-4 py-2 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"
            >
                Anterior
            </button>

            <!-- Primera página -->
            <button 
                *ngIf="currentPage > 1 && totalPages > 3"
                (click)="onPageChange(0)"
                class="px-4 py-2 border rounded hover:bg-gray-100 cursor-pointer"
            >
                1
            </button>

            <!-- Puntos suspensivos iniciales -->
            <span *ngIf="currentPage > 2 && totalPages > 3" class="px-2">...</span>

            <!-- Rango de páginas cercanas -->
            <ng-container *ngFor="let page of getVisiblePages()">
                <button 
                (click)="onPageChange(page)"
                [class.bg-secondary]="currentPage === page"
                [class.text-white]="currentPage === page"
                [class.font-bold]="currentPage === page"
                [class.border-secondary]="currentPage === page"
                [class.hover:text-secondary]="currentPage === page"
                class="px-4 py-2 border rounded hover:bg-gray-100 transition-colors duration-200 cursor-pointer"
                >
                {{ page + 1 }}
                </button>
            </ng-container>

            <!-- Puntos suspensivos finales -->
            <span *ngIf="currentPage < totalPages - 3 && totalPages > 3" class="px-2">...</span>

            <!-- Última página -->
            <button 
                *ngIf="currentPage < totalPages - 2 && totalPages > 3"
                (click)="onPageChange(totalPages - 1)"
                class="px-4 py-2 border rounded hover:bg-gray-100 cursor-pointer"
            >
                {{ totalPages }}
            </button>

            <!-- Botón Siguiente -->
            <button 
                (click)="onPageChange(currentPage + 1)"
                [disabled]="currentPage === totalPages - 1"
                class="px-4 py-2 border rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"
            >
                Siguiente
            </button>
        </div>

    </main>
    
</div>
